# Configuration typo3blog sample page
##################################################

# DEFINE DEFAULT CONTENT MARKER
lib.content_main < styles.content.get
lib.content_right < styles.content.getRight

# Configuration Blog and additional plugins
##################################################

#Setup typo3blog categoryList
plugin.tx_typo3blog_pi1.CategoryList.stdWrap.wrap = <div class="well" style="padding: 8px 0;"><ul class="nav nav-list">|</ul></div>
plugin.tx_typo3blog_pi1.CategoryList.2.wrap = <ul class="nav nav-list">|</ul>
plugin.tx_typo3blog_pi1.CategoryList.3.wrap = <ul class="nav nav-list">|</ul>
plugin.tx_typo3blog_pi1.CategoryList.4.wrap = <ul class="nav nav-list">|</ul>

#Setup typo3blog bloglist
plugin.tx_typo3blog_pi1.blogList.marker {
	# wrap title
	title.wrap = <h2>|</h2>

	# wrap showmore link
	showmore.typolink.ATagParams = class="btn btn-inverse"

	# wrap with divider in breadcrumb
	author.if.isTrue.field = author
	author.wrap = <span class="divider"> /</span> |

	author_email.if.isTrue.field = author
	author_email.wrap = <span class="divider"> /</span> |

	crdate.if.isTrue.field = crdate
	crdate.wrap = <span class="divider"> /</span> |

	tx_typo3blog_tagcloud.if.isTrue.field = crdate
	tx_typo3blog_tagcloud.wrap = <span class="divider"> /</span> |
}

#Setup typo3blog blogSingle
plugin.tx_typo3blog_pi1.blogSingle.marker {
	# wrap title
	title.wrap = <h2>|</h2>

	# wrap with divider in breadcrumb
	author.if.isTrue.field = author
	author.wrap = <span class="divider"> /</span> |

	author_email.if.isTrue.field = author
	author_email.wrap = <span class="divider"> /</span> |

	crdate.if.isTrue.field = crdate
	crdate.wrap = <span class="divider"> /</span> |

	tx_typo3blog_tagcloud.if.isTrue.field = crdate
	tx_typo3blog_tagcloud.wrap = <span class="divider"> /</span> |
}

#Setup plugin pagebrowse configuration set the templateFile
plugin.tx_pagebrowse_pi1 {
	templateFile = EXT:typo3_blog/res/layout/pluginTemplates/pagebrowse/template.html
}

#Setup plugin comments configuration for blogSingle View add FORM only
plugin.tx_comments_pi1 {
	templateFile = EXT:typo3_blog/res/layout/pluginTemplates/comments/template.html
	code = FORM
}
plugin.tx_typo3blog_pi1.blogSingle.marker.comments < plugin.tx_comments_pi1


#Setup plugin comments configuration for sidebar in add COMMENTS only
commentList < plugin.tx_comments_pi1
commentList {
	code = COMMENTS
}

#Setup plugin vge_tagcloud configuration for sidebar.
tagcloud < plugin.tx_vgetagcloud_pi1
tagcloud {
	referenceTable = pages
	referenceFields = tx_typo3blog_tagcloud
	targetPage = {$plugin.tx_typo3blog_pi1.startPid}
	tagWrap {
		typolink {
			parameter = {$plugin.tx_typo3blog_pi1.startPid}
			additionalParams.cObject = TEXT
			additionalParams.cObject {
				field = tag_keyword
				rawUrlEncode = 1
				dataWrap = &tagsearch={tag_keyword}
			}
			useCacheHash = 1
		}
	}
	cloudWrap.wrap = <h3>Tagcloud</h3><ul>|</ul>
	_CSS_DEFAULT_STYLE >
}

#Setup sidebar add plugins to render in sidebar
typo3blog.sidebar = COA
typo3blog.sidebar {
	10 < plugin.tx_typo3blog_pi1.CategoryList
	20 < plugin.tx_typo3blog_pi1
	20.what_to_display = CALENDAR
	30 < commentList
	40 < plugin.tx_typo3blog_pi1
	40.what_to_display = ARCHIVE
}

#SWITCH CONTENT MARKER IF BLOG PAGE
[globalVar = TSFE:page|doktype=73]
	plugin.tx_typo3blog_pi1.what_to_display = BLOGLIST
	lib.content_main < plugin.tx_typo3blog_pi1
	typo3blog.sidebar.30 >
[else]
	plugin.tx_typo3blog_pi1.what_to_display = BLOGSINGLE
	lib.content_main < plugin.tx_typo3blog_pi1
	typo3blog.sidebar.50 >
[global]

# Add output to sidebar
lib.content_right < typo3blog.sidebar

# Page setup for typo3_blog
page = PAGE
page {
	config {
		# Admin settings
		admPanel = {$config.adminPanel}
		debug = {$config.debug}

		# set Base URL
		baseURL = http://{$config.domain}/

		# Doctype
		doctype = html5

		# Character sets
		renderCharset = utf-8
		metaCharset = utf-8

		# Set Language
		htmlTag_langKey = en
		sys_language_uid = 0
		language = en
		locale_all = en_US

		# Cache settings
		cache_period = 43200
		sendCacheHeaders = 1
	}

	# INSERT CSS FILES
	includeCSS {
		typo3_blog_bootstrap1 = EXT:typo3_blog/res/layout/css/bootstrap.min.css
		typo3_blog_bootstrap2 = EXT:typo3_blog/res/layout/css/bootstrap-responsive.min.css
		typo3_blog_css = EXT:typo3_blog/res/layout/css/style.css
	}

	# INSERT JS FILES
	includeCSS {
		typo3_blog_bootstrap = EXT:typo3_blog/res/layout/js/bootstrap.js
	}

	# Setup site template
	10 = TEMPLATE
	10 {
		template = FILE
		template.file = EXT:typo3_blog/res/layout/template.html

		# Define template subparts
		workOnSubpart = DOCUMENT_BODY

		#Content Normal
		subparts.CONTENT_NORMAL < lib.content_main

		#Content Normal
		subparts.EXTENDED_NORMAL_1 < plugin.tx_typo3blog_pi1.LatestPosts

		#Content Normal
		subparts.EXTENDED_NORMAL_2 < plugin.tx_typo3blog_pi1.LatestComments

		#Content Normal
		subparts.EXTENDED_NORMAL_3 < tagcloud

		# Content RIGHT
		subparts.CONTENT_RIGHT < lib.content_right
	}
}
